{"version":3,"sources":["../../src/trending-react/trending-react-endpoint.js"],"names":["makeTrendingReactEndpointHandler","trendingReactQuery","handle","httpRequest","method","postTrendingReact","getTrendingReact","updateTrendingReact","deleteTrendingReact","statusCode","errorMessage","id","queryParams","category","trending_id","mentor_id","max","before","after","undefined","result","findByCategory","headers","data","JSON","stringify","findByTrendingId","findByMentorId","findById","trendingReactInfo","body","parse","path","trendingReact","add","verify","updateMentorPassword","updateMentorPicture","updateMentor","e","message","UniqueConstraintError","InvalidPropertyError","RequiredParameterError","update","pathParams","deleteByTrendingId","deleteById"],"mappings":"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","sourcesContent":["import {\n    UniqueConstraintError,\n    InvalidPropertyError,\n    RequiredParameterError\n  } from '../helpers/errors';\n  import makeHttpError from '../helpers/http-error';\n  import makeTrendingReact from './trending-react';\n\nexport default function makeTrendingReactEndpointHandler({trendingReactQuery}){\n    return async function handle(httpRequest){\n        switch (httpRequest.method) {\n            case 'POST':\n              return postTrendingReact(httpRequest)\n      \n            case 'GET':\n              return getTrendingReact(httpRequest)\n\n            case 'PUT':\n                return updateTrendingReact(httpRequest)\n      \n            case 'DELETE':\n              return deleteTrendingReact(httpRequest)\n\n            default:\n              return makeHttpError({\n                statusCode: 405,\n                errorMessage: `${httpRequest.method} method not allowed.`\n              })\n        }\n    }\n\n    async function getTrendingReact (httpRequest) {\n\n      const { id } = httpRequest.queryParams || {}\n      const { category } = httpRequest.queryParams || {}\n      const { trending_id } = httpRequest.queryParams || {}\n      const { mentor_id } = httpRequest.queryParams || {}\n      const { max, before, after } = httpRequest.queryParams || {}\n\n      if (category !== undefined ){\n        \n        const result = await trendingReactQuery.findByCategory({ category })\n\n        return {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          statusCode: 200,\n          data: JSON.stringify(result)\n        }\n\n      }\n      else if (trending_id !== undefined ){\n        \n        const result = await trendingReactQuery.findByTrendingId({ trending_id })\n\n        return {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          statusCode: 200,\n          data: JSON.stringify(result)\n        }\n\n      }\n      else if (mentor_id !== undefined ){\n        \n        const result = await trendingReactQuery.findByMentorId({ mentor_id })\n\n        return {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          statusCode: 200,\n          data: JSON.stringify(result)\n        }\n\n      }\n      else if (id !== undefined ){\n       \n        const result = await trendingReactQuery.findById({ id })\n\n        return {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          statusCode: 200,\n          data: JSON.stringify(result)\n        }\n\n      }\n      else {\n        const result = await trendingReactQuery.getTrendingReact({ max, before, after })\n\n        return {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          statusCode: 200,\n          data: JSON.stringify(result)\n        }\n        \n      }\n        \n    }\n\n    async function postTrendingReact (httpRequest) {\n        let trendingReactInfo = httpRequest.body\n        if (!trendingReactInfo) {\n          return makeHttpError({\n            statusCode: 400,\n            errorMessage: 'Bad request. No POST body.'\n          })\n        }\n    \n        if (typeof httpRequest.body === 'string') {\n          try {\n            trendingReactInfo = JSON.parse(trendingReactInfo)\n          } catch {\n            return makeHttpError({\n              statusCode: 400,\n              errorMessage: 'Bad request. POST body must be valid JSON.'\n            })\n          }\n        }\n    \n        try {\n          if (httpRequest.path == '/trending-react/add'){\n            const trendingReact = makeTrendingReact(trendingReactInfo)\n            const result = await trendingReactQuery.add(trendingReact)\n            return {\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              statusCode: 201,\n              data: JSON.stringify(result)\n            }\n          }\n          else if (httpRequest.path == '/trending-react/verify'){\n            const result = await trendingReactQuery.verify(trendingReactInfo)\n            return {\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              statusCode: 201,\n              data: JSON.stringify(result)\n            }\n          }\n          else if (httpRequest.path == '/trending-react/update-mentor-password'){\n            const trendingReact = makeTrendingReact(trendingReactInfo)\n            const result = await trendingReactQuery.updateMentorPassword(trendingReact)\n            return {\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              statusCode: 201,\n              data: JSON.stringify(result)\n            }\n          }\n          else if (httpRequest.path == '/trending-react/update-mentor-picture'){\n            const trendingReact = makeTrendingReact(trendingReactInfo)\n            const result = await trendingReactQuery.updateMentorPicture(trendingReact)\n            return {\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              statusCode: 201,\n              data: JSON.stringify(result)\n            }\n          }\n          else {\n            const trendingReact = makeTrendingReact(trendingReactInfo)\n            const result = await trendingReactQuery.updateMentor(trendingReact)\n            return {\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              statusCode: 201,\n              data: JSON.stringify(result)\n            }\n          }\n        } catch (e) {\n          return makeHttpError({\n            errorMessage: e.message,\n            statusCode:\n              e instanceof UniqueConstraintError\n                ? 409\n                : e instanceof InvalidPropertyError ||\n                  e instanceof RequiredParameterError\n                  ? 400\n                  : 500\n          })\n        }\n    }\n\n\n    async function updateTrendingReact (httpRequest) {\n        let trendingReactInfo = httpRequest.body\n        if (!trendingReactInfo) {\n          return makeHttpError({\n            statusCode: 400,\n            errorMessage: 'Bad request. No POST body.'\n          })\n        }\n    \n        if (typeof httpRequest.body === 'string') {\n          try {\n            trendingReactInfo = JSON.parse(trendingReactInfo)\n          } catch {\n            return makeHttpError({\n              statusCode: 400,\n              errorMessage: 'Bad request. POST body must be valid JSON.'\n            })\n          }\n        }\n    \n        try {\n          const trendingReact = makeTrendingReact(trendingReactInfo)\n          const result = await trendingReactQuery.update(trendingReact)\n          return {\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            statusCode: 201,\n            data: JSON.stringify(result)\n          }\n        } catch (e) {\n          return makeHttpError({\n            errorMessage: e.message,\n            statusCode:\n              e instanceof UniqueConstraintError\n                ? 409\n                : e instanceof InvalidPropertyError ||\n                  e instanceof RequiredParameterError\n                  ? 400\n                  : 500\n          })\n        }\n    }\n\n    async function deleteTrendingReact (httpRequest) {\n      const { id } = httpRequest.pathParams || {}\n      const { trending_id } = httpRequest.pathParams || {}\n  \n      if (trending_id !== undefined ){\n        try {\n          const result = await trendingReactQuery.deleteByTrendingId({ trending_id })\n  \n          return {\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            statusCode: 200,\n            data: JSON.stringify(result)\n          }\n        }\n        catch (e){\n          return makeHttpError({\n            errorMessage: e.message,\n            statusCode:\n              e instanceof UniqueConstraintError\n                ? 409\n                : e instanceof InvalidPropertyError ||\n                  e instanceof RequiredParameterError\n                  ? 400\n                  : 500\n          })\n  \n        }\n      }\n      else {\n        try {\n          const result = await trendingReactQuery.deleteById({ id })\n          return {\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            statusCode: 200,\n            data: JSON.stringify(result)\n          }\n        }\n        catch (e){\n          return makeHttpError({\n            errorMessage: e.message,\n            statusCode:\n              e instanceof UniqueConstraintError\n                ? 409\n                : e instanceof InvalidPropertyError ||\n                  e instanceof RequiredParameterError\n                  ? 400\n                  : 500\n          })\n  \n        }\n      }\n      \n    }\n  \n\n}"],"file":"trending-react-endpoint.js"}